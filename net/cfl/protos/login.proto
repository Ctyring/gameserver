syntax = "proto3";

//
// 角色基础信息
//
message RoleData {
    uint64  account_id    = 1;  // 账号ID（唯一标识账号）
    uint64  role_id       = 2;  // 角色ID（唯一标识角色）
    int32   career_id     = 3;  // 职业ID
    int32   level         = 4;  // 当前等级
    int64   exp           = 5;  // 当前经验值
    string  name          = 6;  // 角色名字
    int32   lang_id       = 7;  // 语言/地区ID
    int32   vip_level     = 8;  // VIP等级
    int32   vip_exp       = 9;  // VIP经验值
    int64   fight_value   = 10; // 战斗力
    int32   city_copy_id  = 11; // 当前所在副本ID（城市场景）
    repeated int64 action       = 12; // 最近的行为记录（动作ID列表）
    repeated int64 action_time  = 13; // 行为发生的时间戳（与action一一对应）
    uint64  create_time   = 14; // 角色创建时间
    uint64  logon_time    = 15; // 最近登录时间
    uint64  logoff_time   = 16; // 最近登出时间
    uint64  guild_id      = 17; // 所属公会ID
    int32   channel       = 18; // 渠道ID（来源渠道）
    uint32  online_time   = 19; // 累计在线时长（单位：秒）
}

//
// 背包
//
enum BindType {
    BIND_NONE = 0; // 未绑定
    BIND_YES  = 1; // 已绑定
}

enum ItemStatus {
    ITEM_NORMAL  = 0; // 正常物品
    ITEM_DELETED = 1; // 已删除（不可用）
}

message BagItem {
    uint64 guid       = 1; // 背包格子唯一标识（格子GUID）
    uint64 role_id    = 2; // 所属角色ID
    uint64 item_guid  = 3; // 物品唯一GUID
    uint32 item_id    = 4; // 物品ID（配置表ID）
    int64  count      = 5; // 物品数量
    BindType bind     = 6; // 是否绑定
    ItemStatus status = 7; // 物品状态
}

message BagItems {
    repeated BagItem items = 1; // 背包内的物品列表
}

//
// 副本
//
message CopyItem {
    uint64 role_id     = 1; // 所属角色ID
    uint32 copy_id     = 2; // 副本ID
    int32  star_num    = 3; // 通关星级
    int32  battle_cnt  = 4; // 已挑战次数
    int32  reset_cnt   = 5; // 已重置次数
    uint64 battle_time = 6; // 最近挑战时间
    uint64 reset_time  = 7; // 最近重置时间
}

message ChapterItem {
    uint64 role_id     = 1; // 所属角色ID
    uint32 copy_type   = 2; // 副本类型
    uint32 chapter_id  = 3; // 章节ID
    uint32 star_award  = 4; // 星级奖励领取状态
    uint32 scene_award = 5; // 场景奖励领取状态
}

message Copies {
    repeated CopyItem copies      = 1; // 副本进度列表
    repeated ChapterItem chapters = 2; // 章节奖励列表
}

//
// 装备
//
message EquipItem {
    uint64 role_id       = 1; // 所属角色ID
    uint64 guid          = 2; // 装备唯一GUID
    int32  equip_id      = 3; // 装备ID（配置表ID）
    int32  strength_lvl  = 4; // 强化等级
    int32  refine_level  = 5; // 精炼等级
    int32  star_level    = 6; // 星级
    int32  refine_exp    = 7; // 精炼经验
    int32  star_exp      = 8; // 升星经验
    bool   is_using      = 9; // 是否正在穿戴
}

message Equipments {
    repeated EquipItem items = 1; // 装备列表
}

//
// 宝石
//
message GemItem {
    uint64 role_id       = 1; // 所属角色ID
    uint64 guid          = 2; // 宝石唯一GUID
    int32  gem_id        = 3; // 宝石ID（配置表ID）
    int32  strength_lvl  = 4; // 强化等级
    int32  refine_level  = 5; // 精炼等级
    int32  star_level    = 6; // 星级
    int32  refine_exp    = 7; // 精炼经验
    int32  star_exp      = 8; // 升星经验
    int32  pos           = 9; // 镶嵌位置
}

message Gems {
    repeated GemItem items = 1; // 宝石列表
}

//
// 技能
//
message DBSkillItem {
    uint64 role_id   = 1; // 所属角色ID
    uint32 skill_id  = 2; // 技能ID
    int32  level     = 3; // 技能等级
    int32  key_pos   = 4; // 快捷栏位置
}

message Skills {
    repeated DBSkillItem items = 1; // 技能列表
}

//
// 宠物
//
message PetItem {
    uint64 role_id       = 1; // 所属角色ID
    uint64 guid          = 2; // 宠物唯一GUID
    int32  pet_id        = 3; // 宠物ID（配置表ID）
    int32  strength_lvl  = 4; // 强化等级
    int32  refine_level  = 5; // 精炼等级
    int32  star_level    = 6; // 星级
    bool   is_using      = 7; // 是否出战
}

message Pets {
    repeated PetItem items = 1; // 宠物列表
}

//
// 坐骑
//
message MountItem {
    uint64 role_id       = 1; // 所属角色ID
    uint64 guid          = 2; // 坐骑唯一GUID
    int32  mount_id      = 3; // 坐骑ID（配置表ID）
    int32  strength_lvl  = 4; // 强化等级
    int32  refine_level  = 5; // 精炼等级
    int32  star_level    = 6; // 星级
    bool   is_using      = 7; // 是否正在骑乘
}

message Mounts {
    repeated MountItem items = 1; // 坐骑列表
}

//
// 伙伴
//
message PartnerItem {
    uint64 role_id       = 1; // 所属角色ID
    uint64 guid          = 2; // 伙伴唯一GUID
    int32  partner_id    = 3; // 伙伴ID（配置表ID）
    int32  strength_lvl  = 4; // 强化等级
    int32  refine_level  = 5; // 精炼等级
    int32  star_level    = 6; // 星级
    int32  set_pos       = 7; // 阵位位置
}

message Partners {
    repeated PartnerItem items = 1; // 伙伴列表
}

//
// 任务
//
message TaskItem {
    uint64 role_id   = 1; // 所属角色ID
    uint32 task_id   = 2; // 任务ID
    int32  status    = 3; // 任务状态（进行中/完成/领取）
    int32  progress  = 4; // 任务进度
}

message Tasks {
    repeated TaskItem items = 1; // 任务列表
}

//
// 邮件
//
message MailItem {
    uint64 role_id   = 1;  // 所属角色ID
    uint64 guid      = 2;  // 邮件唯一GUID
    uint64 group_id  = 3;  // 邮件分组ID
    uint64 time      = 4;  // 邮件发送时间
    uint64 sender_id = 5;  // 发送者角色ID
    string sender    = 6;  // 发送者名字
    uint32 mail_type = 7;  // 邮件类型
    uint32 status    = 8;  // 邮件状态（已读/未读/已删除）
    string title     = 9;  // 邮件标题
    string content   = 10; // 邮件正文
    bytes  items     = 11; // 附件物品（序列化数据）
}

message Mails {
    repeated MailItem items = 1; // 邮件列表
}

//
// 活动
//
message ActivityItem {
    uint64 role_id       = 1; // 所属角色ID
    uint32 activity_id   = 2; // 活动ID
    uint32 activity_type = 3; // 活动类型
    uint32 join_time     = 4; // 参加时间
    uint32 data_len      = 5; // 数据长度
    bytes  data          = 6; // 活动相关数据
}

message Activities {
    repeated ActivityItem items = 1; // 活动列表
}

//
// 计数器
//
message CounterItem {
    uint64 role_id    = 1; // 所属角色ID
    uint32 counter_id = 2; // 计数器ID
    uint32 index      = 3; // 索引（用于区分多条数据）
    int64  value      = 4; // 当前值
    uint64 time       = 5; // 时间戳
    uint32 param1     = 6; // 额外参数1
    uint32 param2     = 7; // 额外参数2
}

message Counters {
    repeated CounterItem items = 1; // 计数器列表
}

//
// 好友
//
message FriendItem {
    uint64 role_id   = 1; // 所属角色ID
    uint64 friend_id = 2; // 好友角色ID
}

message Friends {
    repeated FriendItem items = 1; // 好友列表
}

//
// 登录应答
//
message RoleLoginAck {
    uint32      ret_code     = 1;  // 返回码（0表示成功，非0表示错误码）
    uint64      role_id      = 2;  // 登录角色ID
    RoleData    role_data    = 3;  // 角色基本信息
    BagItems    bag_items    = 4;  // 背包数据
    Copies      copies       = 5;  // 副本数据
    Equipments  equipments   = 6;  // 装备数据
    Gems        gems         = 7;  // 宝石数据
    Pets        pets         = 8;  // 宠物数据
    Partners    partners     = 9;  // 伙伴数据
    Tasks       tasks        = 10; // 任务数据
    Mails       mails        = 11; // 邮件数据
    Mounts      mounts       = 12; // 坐骑数据
    Activities  activities   = 13; // 活动数据
    Counters    counters     = 14; // 计数器数据
    Friends     friends      = 15; // 好友数据
    Skills      skills       = 16; // 技能数据
}
